(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[43],{"7uqB":function(e,t,a){"use strict";a.r(t),a.d(t,"LoadableContactModal",(function(){return $}));var o=a("/dBk"),s=a.n(o),n=a("qd51"),r=a("etRO"),i=a("4jfz"),c=a("g2+O"),l=a("mHfP"),d=a("1U+3"),p=a("DY1Z"),u=a("m6w3"),m=a("Udjz"),h=a("oA/F"),b=a("YIwv"),f=a.n(b),v=a("mXGw"),y=a.n(v),O=a("f+2V"),j=a("pLfq"),M=a("nDNw"),g=a("Pice"),P=a("GRrT"),k=a("wtf2"),_=a("07Re"),x=a("wYxh"),w=a("tsDV"),C=a("gl+Y"),S=a("78x/"),I=(a("aaIg"),a("W5PY")),L=new String(".wrapper.jsx-3824761934{background:#e0e0e0;border-radius:4px;}.ca-not-available.jsx-3824761934{height:370px;padding-top:20%;}.photo-wrap.jsx-3824761934{display:none;}@media (min-width:768px){.photo-wrap.jsx-3824761934{display:block;overflow:hidden;position:relative;height:155px;border-radius:4px;}.photo-wrap.jsx-3824761934>img.jsx-3824761934{position:absolute;top:50%;left:50%;min-width:100%;min-height:100%;-webkit-transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);}}@media (max-width:479px){.cta-modal-mobile.mobile-fullScreen .modal-header .modal-title h2{font-size:1.3em;}}.lead-number.jsx-3824761934{padding:16px;font-size:20px;padding-bottom:0px;}.lead-title-number.jsx-3824761934{text-align:center;font-size:18px;margin-bottom:0;}.lead-title-number.jsx-3824761934 svg{margin-right:5px;}@media (max-width:479px){.lead-number.jsx-3824761934{color:#8a8a8a;}.lead-phone.jsx-3824761934{padding-bottom:16px;}.lead-title-number.jsx-3824761934{color:#333333;}}");L.__hash="3824761934";var E=L,A=a("dbS8"),R=a("kS9P"),T=a("nBd1"),D=a("F38o"),N=a("sivu"),F=a("pmE8"),q=a("on6n"),B=a("UFcU"),H=a("7i/E"),V=a("yrcK"),G=a("5sd7"),z=a("Ld9l"),U=a.n(z),Y=y.a.createElement;function J(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function K(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?J(Object(a),!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):J(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function W(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,o=Object(p.a)(e);if(t){var s=Object(p.a)(this).constructor;a=Reflect.construct(o,arguments,s)}else a=o.apply(this,arguments);return Object(d.a)(this,a)}}var X,Z={loading:H.a,ssr:!1,delay:200,timeout:1e4,render:function(e,t){var a=e.default,o=t.forwardedRef,s=Object(h.a)(t,["forwardedRef"]);return Y(a,Object(m.a)({},s,{ref:o}))}},Q=function(e){Object(l.a)(a,e);var t=W(a);function a(e){var o;Object(r.a)(this,a),o=t.call(this,e),Object(u.a)(Object(c.a)(o),"contactAgentFormSubmitModal",null),Object(u.a)(Object(c.a)(o),"postInquiryModal",null),Object(u.a)(Object(c.a)(o),"setDefaultState",(function(){o.setState({showContactCheckBox:!1,showMilitaryCheckBox:!1,flip_the_market_enabled:!1,cashback_enabled:!1})})),Object(u.a)(Object(c.a)(o),"setLeadDataState",(function(e){o.setState({showContactCheckBox:e.show_contact_a_lender,showMilitaryCheckBox:e.show_veterans_united,leadType:e.lead_type,isLcmEnabled:e.is_lcm_enabled,isNone:"none"===e.lead_type,flip_the_market_enabled:e.flip_the_market_enabled,cashback_enabled:e.cashback_enabled})})),Object(u.a)(Object(c.a)(o),"updateLeadDataForm",Object(n.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.props.savedProperty.lead_attributes||!o.props.savedProperty.lead_attributes.lead_type){e.next=5;break}o.setLeadDataState(o.props.savedProperty.lead_attributes),o.setState({isLeadFormLoaded:!0}),e.next=11;break;case 5:return t={isLeadFormLoaded:!0},e.next=8,o.getLeadInfoFromLeadService();case 8:(a=e.sent)?o.setLeadDataState(a):t=K(K({},t),{},{isNone:o.props.savedProperty.status!==g.ub}),o.setState(t);case 11:case"end":return e.stop()}}),e)})))),Object(u.a)(Object(c.a)(o),"saveRef",(function(e){o.modal=e})),Object(u.a)(Object(c.a)(o),"closeModal",(function(){o.modal.closeModal()})),Object(u.a)(Object(c.a)(o),"setServedInMilitary",(function(e){o.setState({servedInMilitary:e})})),Object(u.a)(Object(c.a)(o),"setVuOptInCheckbox",(function(e){o.setState({vuOptInCheckbox:e})})),Object(u.a)(Object(c.a)(o),"saveContactSubmitModalRef",(function(e){o.contactAgentFormSubmitModal=e})),Object(u.a)(Object(c.a)(o),"savePostInquiryModalRef",(function(e){o.postInquiryModal=e})),Object(u.a)(Object(c.a)(o),"saveCrossSellModalRef",(function(e){o.crossSellModal=e})),Object(u.a)(Object(c.a)(o),"openContactAgentFormSubmitModal",(function(){o.contactAgentFormSubmitModal.open()})),Object(u.a)(Object(c.a)(o),"openCrossSellModal",(function(){o.crossSellModal&&o.crossSellModal.open()})),Object(u.a)(Object(c.a)(o),"closeContactAgentFormSubmitModal",(function(){o.contactAgentFormSubmitModal.close()})),Object(u.a)(Object(c.a)(o),"malModalRef",(function(e){o.rdcMalLeadForm=e})),Object(u.a)(Object(c.a)(o),"openMalModal",(function(){o.rdcMalLeadForm&&o.rdcMalLeadForm.open()})),Object(u.a)(Object(c.a)(o),"openPurePostInquiryModal",(function(){o.postInquiryModal&&o.postInquiryModal.open(o.props.ctaName)})),Object(u.a)(Object(c.a)(o),"updateAfterSubmitLead",(function(e){var t=e.malAdditionalData,a=e.getPreApproved,s=e.lcsGuid,n=e.creditRange,r=e.showMilitaryCheckBox,i=o.props,c=i.isPurePostInquiryEnabled,l=i.isNonBuilderLead;if(o.setState({submitStatus:!0,lcsGuid:s,creditRange:n,isPreApprovedChecked:a,showMilitaryCheckBox:r}),o.closeModal(),c||l){var d=t&&t.lead_json,p=d&&d.lead_data,u=p&&p.phone;o.setState({postInquiryModalRequested:!0,userPhone:u},(function(){return o.openPurePostInquiryModal()}))}else o.openNonPostInquiryModal(e)})),Object(u.a)(Object(c.a)(o),"openNonPostInquiryModal",(function(e){var t=e.malProperties,a=e.malImpressionToken,s=e.servedInMilitary,n=e.malAdditionalData,r=e.getPreApproved,i=o.props.savedProperty,c=o.state,l=c.isLcmEnabled,d=c.leadType;t?(o.setState({malProperties:t,servedInMilitary:s,malAdditionalData:n,malImpressionToken:a}),o.openMalModal()):Object(x.K)(i,r,l,d)?o.setState({crossSellModalRequested:!0},(function(){o.openCrossSellModal()})):o.openContactAgentFormSubmitModal()})),Object(u.a)(Object(c.a)(o),"openThankyouModal",(function(){o.setState({submitStatus:!0}),o.openContactAgentFormSubmitModal()})),Object(u.a)(Object(c.a)(o),"handleCrossSellModalSubmit",(function(){o.openContactAgentFormSubmitModal()})),Object(u.a)(Object(c.a)(o),"shouldShowVideoTourForPrivateShowing",(function(){var e=o.props.showVideoTourOnChoiceMarkets,t=o.state.title;return e&&t===g.O.PRIVATE.TITLE})),Object(u.a)(Object(c.a)(o),"componentWillUnmount",(function(){o.setDefaultState()})),o.state={isOpen:!1,isNone:!1,submitStatus:!1,isLeadFormLoaded:!1,placementData:"",leadType:"",isLcmEnabled:!1,showContactCheckBox:!1,showMilitaryCheckBox:!1,flip_the_market_enabled:!1,cashback_enabled:!1,title:"",malProperties:!1,servedInMilitary:!1,vuOptInCheckbox:!1,malAdditionalData:!1,crossSellModalRequested:!1,vuMessageEnabled:e.vuMessageEnabled,postInquiryModalRequested:!1,userPhone:null};var i=e.savedProperty,l=void 0===i?{}:i,d=l&&l.status,p=l&&l.source&&l.source.type,m=Object(C.b)(d,p),h=m.isPlan,b=m.isCommunity,f=m.isSpecHome;return o.isNewHome=h||b||f,o}return Object(i.a)(a,[{key:"open",value:function(e,t,a){var o="".concat(P.n,":").concat(e),s=this.props.savedProperty,n=void 0===s?{}:s,r=n&&n.status,i=n&&n.source&&n.source.type,c=Object(C.b)(r,i),l=c.isPlan,d=c.isCommunity,p=c.propertyText,u=c.isSpecHome,m={};if(this.isNewHome){var h=n&&n.description&&n.description.name&&n.description.name.toLowerCase().includes("plan")?"".concat(n.description.name):"".concat(n.description.name," plan"),b=n&&n.community&&n.community.description&&n.community.description.name||n&&n.description&&n.description.name;m.TITLE="Find out more about this ".concat(p);var f=n&&n.location&&n.location.address&&n.location.address.line;l&&(m.PLACEHOLDER="I am interested in ".concat(h," in the ").concat(b," community")),d&&(m.PLACEHOLDER="I am interested in the ".concat(b," community")),u&&(m.PLACEHOLDER="I am interested in ".concat(f))}t||(t=g.O.DETAILS),X=this.isNewHome?m:t,Object(k.a)({action:_.a,omtag:o}),Object(S.a)(),this.modal.openModal("contactAgentForm",o),this.setState({placementData:o,title:X.TITLE,identifier:a}),this.updateLeadDataForm()}},{key:"getLeadInfoFromLeadService",value:function(){var e=Object(n.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new q.a).getLeadForm(this.props.savedProperty.property_id);case 2:if(!((t=e.sent)&&t.result&&t.result.lead_forms&&t.result.lead_forms.length>0&&t.result.prop_common&&"not_for_sale"!==t.result.prop_common.status)){e.next=5;break}return e.abrupt("return",t.result.lead_forms[0]);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this,a=this.props,o=a.savedProperty,s=a.userAgent,n=a.vuOptIn,r=a.accountCreationForHandraisersEnabled,i=a.ctaName,c=a.isDesktop,l=(a.isMobile,a.isMobilePureMarket),d=a.leadPrequalEnabled,p=a.isNonBuilderLead,u=o||{},h=u.location,b=(h=void 0===h?{}:h).address,v=void 0===b?{}:b,g=u.home_photos,P=void 0===g?{}:g,k=u.primary_photo,_=void 0===k?{}:k,S=u.status,L=void 0===S?"":S,q=u.source,H=q&&q.type,z=Object(C.b)(L,H),U=z.isPlan,J=z.isCommunity,K=(z.isSpecHome,P&&P.collection&&P.collection[0]&&P.collection[0].href?P.collection[0].href:M.a),W=Object(M.g)(_&&_.href?_.href:K),Z=!W&&"not_for_sale"!==u.status,Q=Object(x.g)(v);if(J)Q=Object(V.a)(null===(e=u.description)||void 0===e?void 0:e.name)+" Community";else if(U){var $,ee,te;Q=(null===($=u.description)||void 0===$?void 0:$.name)+" Plan in "+Object(V.a)(null===u||void 0===u||null===(ee=u.community)||void 0===ee||null===(te=ee.description)||void 0===te?void 0:te.name)+" Community"}var ae=Object(G.a)(u),oe=Object(w.a)(u),se=this.state,ne=se.isPurePostInquiryEnabled,re=se.malProperties,ie=se.crossSellModalRequested,ce=se.postInquiryModalRequested,le=se.userPhone,de=(se.title,!ne&&!p&&re),pe=!ne&&ie,ue=u&&u.lead_attributes,me=ue&&ue.phones,he=this.shouldShowVideoTourForPrivateShowing();return Y(y.a.Fragment,null,Y(f.a,{id:E.__hash},E),Y("div",{className:"jsx-".concat(E.__hash)+" contactAgentFormSubmitModal"},Y(N.a,{ref:this.saveContactSubmitModalRef,visitorName:this.state.visitorName,submitStatus:this.state.submitStatus,placementData:this.state.placementData,pageType:this.props.pageType,servedInMilitary:this.state.servedInMilitary,vuMessageEnabled:this.state.vuMessageEnabled,vuOptInCheckbox:this.state.vuOptInCheckbox,fullAddress:Q,isPreApprovedChecked:this.state.isPreApprovedChecked,creditRange:this.state.creditRange,status:L,sourceType:H,isNonBuilderLead:p})),de&&Y("div",{className:"jsx-".concat(E.__hash)+" contactAgentMal"},Y(I.a,{propertyPhoto:W,userAgent:s,ref:this.malModalRef,properties:this.state.malProperties,malImpressionToken:this.state.malImpressionToken,servedInMilitary:this.state.servedInMilitary,isPreApprovedChecked:this.state.isPreApprovedChecked,vuOptInCheckbox:this.state.vuOptInCheckbox,fullAddress:Q,placementData:this.state.placementData,pageType:this.props.pageType,openThankyou:this.openThankyouModal,creditRange:this.state.creditRange,vuMessageEnabled:this.state.vuMessageEnabled,isPurePostInquiryEnabled:this.props.isPurePostInquiryEnabled,propertyType:ae})),pe&&Y("div",{className:"jsx-".concat(E.__hash)+" crossSellModal"},Y(F.a,Object(m.a)({ref:this.saveCrossSellModalRef,pageType:this.props.pageType,placementData:this.state.placementData,lcsGuid:this.state.lcsGuid,showMilitaryCheckBox:this.state.showMilitaryCheckBox,vuMessageEnabled:this.state.vuMessageEnabled,vuOptInCheckbox:this.state.vuOptInCheckbox,fullAddress:Q,isPreApprovedChecked:this.state.isPreApprovedChecked},oe,{status:L,sourceType:H,isNonBuilderLead:p}))),(ce||p)&&Y(B.a,{ref:this.savePostInquiryModalRef,propertyAddress:Q,userPhone:le,ctaName:i,isDesktop:c,phones:me}),Y(A.a,{ref:this.saveRef,size:"modal-sm",headline:this.state.title,mobileType:"fullScreen",mobileLeadTheme:!0,customClassName:"cta-modal-mobile"},this.state.isLeadFormLoaded&&Y(y.a.Fragment,null,Y(T.a,{show:this.state.isNone},Y("div",{className:"jsx-".concat(E.__hash)+" text-center ca-not-available"},Y("p",{className:"jsx-".concat(E.__hash)}," Contact Agent Feature is not available for this Property"),Y(D.a,{inputType:"submit",type:"primary",id:"response_showing_lead_submit",onClick:this.closeModal},"Go back to my results"))),Y(T.a,{show:!this.state.isNone},Y(y.a.Fragment,null,Y("div",{className:"jsx-".concat(E.__hash)+" wrapper"},Y("div",{className:"jsx-".concat(E.__hash)+" photo-wrap"},Y("img",{alt:"property",itemProp:"image","data-src":W,src:W,className:"jsx-".concat(E.__hash)}),Z&&Y("div",{className:"jsx-".concat(E.__hash)+" property-photos-coming-soon"}," Photos coming soon")),Y(O.c,{to:[j.a]},(function(e){return Y(R.a,{property:t.props.savedProperty,onSubmitLead:t.updateAfterSubmitLead,userEmail:t.props.userEmail,userName:t.props.userName,leadType:t.state.leadType,isLcmEnabled:t.state.isLcmEnabled,showContactCheckBox:t.state.showContactCheckBox,showMilitaryCheckBox:t.state.showMilitaryCheckBox,placementData:t.state.placementData,vuOptIn:n,pageType:t.props.pageType,seeMore:!0,placeholderData:X,setServedInMilitary:t.setServedInMilitary,setVuOptInCheckbox:t.setVuOptInCheckbox,addLeadsContacted:function(t){e.add(t)},largeCTA:!0,isDesktop:t.props.isDesktop,cashRewardEnabled:t.props.cashRewardEnabled||t.state.flip_the_market_enabled&&t.state.cashback_enabled,smartHomeRewardsEnabled:t.props.smartHomeRewardsEnabled,userAgent:s,creditRange:t.state.creditRange,vuMessageEnabled:t.state.vuMessageEnabled,isPreApprovedChecked:t.state.isPreApprovedChecked,ctaName:i,identifier:t.state.identifier,accountCreationForHandraisersEnabled:r,isMobilePureMarket:l,showVideoTourOnChoiceMarkets:he,leadPrequalEnabled:d,cashRewardTCPA:!1,isNonBuilderLead:p})}))))))))}}]),a}(y.a.Component);Object(u.a)(Q,"defaultProps",{isDesktop:!0});var $=U()((function(){return Promise.resolve().then(a.bind(null,"7uqB"))}),Z);t.default=Q}}]);